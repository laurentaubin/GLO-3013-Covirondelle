import os

import numpy as np

# Config
CONFIG_FILE_PATH = os.path.dirname(os.path.abspath(__file__)) + "/"

# Communication
SOCKET_DOCKER_ADDRESS = "tcp://0.0.0.0:"
PING_PORT = "5555"

SOCKET_ANY_ADDRESS = "tcp://*:"
GAME_CYCLE_PORT = "5556"
STREAM_PI_FEED_PORT = "5557"

# Pathfinding
# TODO Test at lab to find right radii value
ROBOT_RADIUS = 40
OBSTACLE_RADIUS = 12

# Vision
CALIBRATION_FILE_PATH = CONFIG_FILE_PATH + "numpy-640x480.npz"
PUCK_TEMPLATE_LOCATION = CONFIG_FILE_PATH + "../infra/vision/templates/"


LAPTOP_CAMERA_INDEX = 0
PC_CAMERA_INDEX = 1

PIXEL_TO_METERS_RATIO = 257.2
PIXEL_TO_CENTIMETERS_RATIO = 2.572

OBSTACLE_ARUCO_MARKER_ID = 0
# in meter
OBSTACLE_ARUCO_MARKER_SIZE = 0.08
ROBOT_ARUCO_MARKER_ID = 1
ROBOT_ARUCO_MARKER_SIZE = 0.12
CALIBRATION_ARRAYS = np.load(CALIBRATION_FILE_PATH)
CAMERA_MATRIX = CALIBRATION_ARRAYS["camera_matrix"]
DISTORTION_COEFFICIENTS = CALIBRATION_ARRAYS["distortion_coefficients"]

WORLD_CAMERA_IMAGE_SIZE = (640, 480)

# in meter
OBSTACLE_HEIGHT = 0.40
ROBOT_HEIGHT = 0.232

BASE_TABLE_IMAGE = (
    CONFIG_FILE_PATH + "../../resources/test/puck/puck_configuration_1.jpg"
)

DEFAULT_OHMMETER_POSITION = 75, 336

GRIPPER_OFFSET = 60
DEFAULT_PUCK_ZONE_POSITION = (490, 250)

STARTING_ZONE_CORNERS_POSITION = [
    (248, 156),
    (244, 324),
    (80, 321),
    (83, 157),
]
STARTING_ZONE_CENTER_POSITION = (161, 239)
